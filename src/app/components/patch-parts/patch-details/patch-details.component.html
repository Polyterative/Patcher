<ng-container *ngIf="{
  connections:(dataService.patchesConnections$|async)
  } as bag"
>
  <div class="flow col gap1"
       fxLayoutGap.xs="0rem"
       style="padding-top: 2rem"
  >
    <app-auto-loading-indicator [data$]="dataService.patchesConnections$"
                                [updateData$]="dataService.updateSinglePatchData$"
                                [skipFirstData]="true"
                                [loadingLines]="5"
    >
  
      <ng-container *ngIf="bag.connections.length>0; else noData">
        <lib-hero-content-card [titleNormal]="bag.connections.length+' Connections'"
        >
          <mat-card>
            <div *ngIf="bag.connections.length<=5"
                 class="flow col gap1"
                 style="max-height: 40rem; overflow-y: auto;"
            >
              <ng-container *ngFor="let item of dataService.patchesConnections$|async">
                <app-patch-connection-minimal [data]="item"></app-patch-connection-minimal>
                <mat-divider inset="true"></mat-divider>
              </ng-container>
            </div>
  
            <cdk-virtual-scroll-viewport *ngIf="bag.connections.length>5"
                                         itemSize="58.76"
                                         style="height: 40rem; overflow: auto;"
            >
              <div class="flow col gap1">
                <ng-container *cdkVirtualFor="let item of dataService.patchesConnections$|async">
                  <app-patch-connection-minimal [data]="item"></app-patch-connection-minimal>
                  <mat-divider inset="true"></mat-divider>
                </ng-container>
              </div>
            </cdk-virtual-scroll-viewport>
  
          </mat-card>
        </lib-hero-content-card>
      </ng-container>
    </app-auto-loading-indicator>
  </div>
  
  <ng-template #noData>
    <div fxFlex="auto">
      <div class="flow col gap1 animate-fadein-slowest"
      >
        <mat-card-subtitle fxLayoutAlign="center center">It looks like this patch has no connections
        </mat-card-subtitle>
        <mat-card-subtitle fxLayoutAlign="center center">¯\_(ツ)_/¯
        </mat-card-subtitle>
      </div>
    </div>
  </ng-template>
</ng-container>
