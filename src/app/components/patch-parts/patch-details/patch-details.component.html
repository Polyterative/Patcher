<ng-container *ngIf="{
  connections:(dataService.patchesConnections$|async)
  } as bag"
>
  <div class="col gap1"
       fxLayoutGap.xs="0rem"
  >
    <lib-auto-content-loading-indicator [data$]="dataService.patchesConnections$"
                                        [updateData$]="dataService.updateSinglePatchData$"
                                        [skipFirstData]="true"
                                        [loadingLines]="5"
    >
    
      <ng-container *ngIf="bag.connections.length>0; else noData">
        <lib-hero-content-card [titleNormal]="bag.connections.length+' Connections'"
        >
          <mat-card>
            <div *ngIf="bag.connections.length<=8"
                 class="col gap1"
            >
              <ng-container *ngFor="let item of dataService.patchesConnections$|async; let i = index">
                <app-patch-connection-minimal [data]="item"></app-patch-connection-minimal>
                <mat-divider inset="true"
                             *ngIf="i!=bag.connections.length-1"
                ></mat-divider>
              </ng-container>
            </div>
  
            <cdk-virtual-scroll-viewport *ngIf="bag.connections.length>8"
                                         autosize
                                         style="height: 50rem; overflow: auto;"
            >
              <div class="col gap1">
                <div *cdkVirtualFor="let item of dataService.patchesConnections$|async"
                     class="col gap1"
                >
                  <app-patch-connection-minimal [data]="item"></app-patch-connection-minimal>
                  <mat-divider inset="true"></mat-divider>
                </div>
              </div>
            </cdk-virtual-scroll-viewport>

          </mat-card>
        </lib-hero-content-card>
      </ng-container>
    </lib-auto-content-loading-indicator>
  </div>
  
  <ng-template #noData>
    <lib-hero-content-card titleNormal="Connections">
      <div fxFlex="auto">
        <div class="col gap1 animate-fadein-slowest"
        >
          <mat-card-subtitle fxLayoutAlign="center start">It looks like this patch has no
                                                          connections
          </mat-card-subtitle>
          <mat-card-subtitle fxLayoutAlign="center start">¯\_(ツ)_/¯
          </mat-card-subtitle>
        </div>
      </div>
    </lib-hero-content-card>
  </ng-template>
</ng-container>
