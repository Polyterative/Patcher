<div fxLayout="row"
     fxLayoutGap="1rem"
     fxLayout.lt-md="column"

>
  <div fxFlex="grow"
       class="row gap0"
  >
    <app-module-minimal fxFlex="50%"
                        [data]="data.a.module"
                        [hideManufacturer]="true"
                        [hideDescription]="true"
                        [hideButtons]="true"
                        [hideHP]="true"
    
    >
      <mat-chip-list>
        <app-module-cvitem [data]="data.a"
                           kind="out"
        ></app-module-cvitem>
      </mat-chip-list>
    </app-module-minimal>
    <app-patch-connection-symbol></app-patch-connection-symbol>
    <app-module-minimal fxFlex="50%"
                        [data]="data.b.module"
                        [hideManufacturer]="true"
                        [hideDescription]="true"
                        [hideButtons]="true"
                        [hideHP]="true"
    >
      
      <mat-chip-list>
        <app-module-cvitem [data]="data.b"
                           kind="in"
        ></app-module-cvitem>
      </mat-chip-list>
    </app-module-minimal>
  </div>
  
  <ng-container *ngIf="!isEditing">
    <div fxFlex="25%"
         class="col gap0"
    >
      <mat-card-subtitle *ngIf="index"
                         fxLayoutAlign="end"
      >{{index}}</mat-card-subtitle>
      <ng-container *ngIf="data.notes&&data.notes.length>0">
        <mat-card-subtitle style="font-style:italic"
        >
          {{data.notes}}
        </mat-card-subtitle>
      </ng-container>
    </div>
  </ng-container>
  <ng-container *ngIf="isEditing">
    <mat-divider
        [vertical]="true"
    ></mat-divider>
    <div class="col gap0"
    >
      <mat-card-subtitle *ngIf="index"
                         fxLayoutAlign="end"
      >{{index}}</mat-card-subtitle>
      <button mat-icon-button
              [matTooltip]="isCreator?'Clear selection':'Remove connection'"
              (click)="remove$.next(data)"
      >
        <!--        <mat-icon>link_off</mat-icon>-->
        <mat-icon>delete</mat-icon>
      </button>
      <div fxFlex="grow"></div>
      <app-brand-primary-button *ngIf="isCreator"
                                (click)="create$.next(data)"
      >
        <mat-icon>add_link</mat-icon>
        Add
      </app-brand-primary-button>
    </div>
  </ng-container>
</div>
<lib-mat-form-entity type="area"
                     [control]="notes.control"
                     label="Notes"
                     [disabled]="!isEditing"
                     *ngIf="isEditing&&!isCreator"
                     [hint]="notes.control.value.length+'/999'"
></lib-mat-form-entity>
